# מדריך מערכת RSVP ב-SMS

## סקירה כללית

המערכת עברה לגישה פשוטה ויעילה יותר:
- **במקום** שיחה דו-כיוונית ב-SMS (שדורשת חבילה מיוחדת)
- **כעת** שליחת SMS אחד עם לינק לדף אישור הגעה אינטראקטיבי

---

## 📱 זרימת העבודה

### שלב 1: שליחת SMS
המערכת שולחת SMS פשוט:
```
הנכם מוזמנים לחתונה של דוד ורות, נשמח שתאשרו הגעתכם בלינק הבא:
https://event-gift-frontend.onrender.com/rsvp/123?token=abc123def456
```

### שלב 2: המוזמן לוחץ על הלינק
הדף RSVP נפתח עם:
- **פרטי האירוע:** שם, תאריך, שעה, מיקום
- **כפתורי אישור:** "כן, נגיע!" או "לא נוכל להגיע"
- **עיצוב יפה ומותאם למובייל**

### שלב 3: אישור הגעה
אם המוזמן בוחר "כן, נגיע!":
1. מופיע בורר מספר מגיעים (+ / -)
2. לוחץ "אישור הגעה"
3. המערכת מעדכנת את בסיס הנתונים

אם המוזמן בוחר "לא נוכל להגיע":
1. לוחץ "אישור"
2. המערכת מעדכנת סטטוס ל-`declined`

### שלב 4: אישור
מוצג מסך תודה יפה עם פרטי האירוע ומספר המגיעים שנרשם.

---

## 🔐 אבטחה

כל לינק כולל **token ייחודי** שנוצר מ:
- מזהה המוזמן
- מספר הטלפון
- שם האירוע

זה מונע מאנשים אחרים לשנות את התשובה של המוזמן.

---

## 💾 עדכון בסיס הנתונים

כשמוזמן משיב, המערכת מעדכנת בטבלת `guests`:
- **status**: `confirmed` או `declined`
- **attending_count**: מספר המגיעים (0 אם declined)
- **updated_at**: תאריך העדכון

---

## 🎨 העיצוב

דף ה-RSVP כולל:
- ✅ עיצוב מודרני ויפה
- ✅ מותאם למובייל
- ✅ אנימציות חלקות
- ✅ צבעים מרהיבים (סגול/ורוד)
- ✅ אייקונים ואמוג'ים
- ✅ הודעות תודה מעוצבות

---

## 🧪 בדיקה

### בדיקה מקומית:
1. שלח SMS למוזמן (כפתור SMS באתר)
2. בדוק את ה-logs - תראה את ה-RSVP link
3. העתק את הלינק ופתח בדפדפן
4. בדוק את תהליך האישור

### דוגמת לינק:
```
https://event-gift-frontend.onrender.com/rsvp/10?token=a1b2c3d4e5f6g7h8
```

---

## 📁 קבצים שנוצרו

### Backend:
- `backend/rsvp_router.py` - API endpoints לטיפול ב-RSVP
  - `GET /api/rsvp/{guest_id}` - טעינת פרטי המוזמן והאירוע
  - `POST /api/rsvp/{guest_id}` - שמירת תשובת ה-RSVP

### Frontend:
- `frontend/src/pages/RSVPPage.jsx` - דף ה-RSVP המעוצב

### שינויים:
- `backend/sms_service.py` - עודכן לשליחת הודעה עם לינק
- `backend/sms_router.py` - יצירת token ייחודי לכל מוזמן
- `backend/main.py` - רישום RSVP router
- `frontend/src/main.jsx` - הוספת route ל-RSVP

---

## ✅ יתרונות

1. **פשוט למוזמנים** - לחיצה אחת על לינק
2. **עובד תמיד** - לא תלוי בחבילת SMS מתקדמת
3. **יפה וידידותי** - עיצוב מודרני ונוח
4. **מהיר** - תשובה מיידית, לא צריך להמתין ל-SMS
5. **חסכוני** - רק SMS אחד לכל מוזמן
6. **מאובטח** - token ייחודי למוזמן
7. **מעקב קל** - כל התשובות בבסיס הנתונים

---

## 🎉 זהו!

המערכת מוכנה לשימוש!
כעת כשאתה שולח SMS למוזמן, הוא יקבל לינק לדף RSVP מעוצב ונוח,
ויוכל לאשר/לבטל הגעה בקלות.
